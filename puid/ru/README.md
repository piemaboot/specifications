# PUID[^1]
## Содержание
- [Структура](#структура)
  - [Варианты](#варианты)
  - [Категории](#категории)
- [Список зарезервированных PUID](#список-зарезервированных-puid)

## Структура
Все PUID состоят из двух частей: первый байт - метаданные, а следующие 15 байт - сами данные.

Первый байт составляется из [варианта](#варианты) и [категории](#категории):
```py
# variant и category - число от 0 до 15
metadata = variant << 4 | category
```

А весь PUID составляется так:
```py
# metadata составленный ранее
puid = metadata.to_bytes(1, "big")

# value - значение PUID (15 байт)
puid += value
```

### Варианты
![variants](images/variants.svg)

#### "Неизвестный" вариант (`00`)
> ![unknown variant](images/unknown_variant.svg)<br>
> `V` - вариант (`0`); `x` - часть (4 бита) значения

Значение у PUID этого варианта - это полная копия значения UUID, из которого сформирован PUID. Вместо категории у этого варианта ещё 4 бита данных (иначе UUID 4-го варианта не помещается).

#### "Случайный" вариант (`01`)
> ![random variant](images/rr_variant.svg)<br>
> `V` - вариант (`1`); `C` - [категория](#категории); `x` - часть (4 бита) значения

У этого PUID значением являются 15 случайных байт.

#### "Зарезервированный" вариант (`02`)
> ![reversed variant](images/rr_variant.svg)<br>
> `V` - вариант (`2`); `C` - [категория](#категории); `x` - часть (4 бита) значения

Значением зарезервированного PUID - это порядковый номер от `0` до `2¹²⁰-1`.

#### Основанный на времени вариант (`03`)
> ![time-based variant](images/time_variant.svg)<br>
> `V` - вариант (`2`); `C` - [категория](#категории); `t` - часть (4 бита) времени создания PUID; `x` - часть (4 бита) случайного значения

Первые 8 байт значения - это время в формате timestamp64. А следующие 7 байт - это случайное число от `0` до `2⁵⁶-1`.

### Категории
![categories](images/categories.svg)

## Список зарезервированных PUID
PUID                                   | Тип                | Описание/Предпросмотр
-------------------------------------- | ------------------ | ------------------------------------------------------------
`20000000-0000-0000-0000-000000000000` |                    | Указывает на конец в списках, где ключ - это PUID
`21000000-0000-0000-0000-000000000000` | Группа             | Корзина
`21000000-0000-0000-0000-000000000001` | Группа             | Группа с шаблонами
`23000000-0000-0000-0000-000000000000` | Стандартная иконка | ![key](/assets/icons/groups/key.svg)
`23000000-0000-0000-0000-000000000001` | Стандартная иконка | ![world](/assets/icons/groups/world.svg)
`23000000-0000-0000-0000-000000000002` | Стандартная иконка | ![server](/assets/icons/groups/server.svg)
`23000000-0000-0000-0000-000000000003` | Стандартная иконка | ![windows](/assets/icons/groups/windows.svg)
`23000000-0000-0000-0000-000000000000` | Стандартная иконка | ![linux](/assets/icons/groups/linux.svg)
`23000000-0000-0000-0000-000000000005` | Стандартная иконка | ![android](/assets/icons/groups/android.svg)
`23000000-0000-0000-0000-000000000006` | Стандартная иконка | ![apple](/assets/icons/groups/apple.svg)
`23000000-0000-0000-0000-000000000007` | Стандартная иконка | ![clipboard-list](/assets/icons/groups/clipboard-list.svg)
`23000000-0000-0000-0000-000000000008` | Стандартная иконка | ![clipboard-check](/assets/icons/groups/clipboard-check.svg)
`23000000-0000-0000-0000-000000000009` | Стандартная иконка | ![user](/assets/icons/groups/user.svg)
`23000000-0000-0000-0000-00000000000A` | Стандартная иконка | ![cogs](/assets/icons/groups/cogs.svg)
`23000000-0000-0000-0000-00000000000B` | Стандартная иконка | ![passport](/assets/icons/groups/passport.svg)
`23000000-0000-0000-0000-00000000000C` | Стандартная иконка | ![camera](/assets/icons/groups/camera.svg)
`23000000-0000-0000-0000-00000000000D` | Стандартная иконка | ![floppy](/assets/icons/groups/floppy.svg)
`23000000-0000-0000-0000-00000000000E` | Стандартная иконка | ![compact-disc](/assets/icons/groups/compact-disc.svg)
`23000000-0000-0000-0000-00000000000F` | Стандартная иконка | ![bolt](/assets/icons/groups/bolt.svg)
`23000000-0000-0000-0000-000000000010` | Стандартная иконка | ![tools](/assets/icons/groups/tools.svg)
`23000000-0000-0000-0000-000000000011` | Стандартная иконка | ![wrench](/assets/icons/groups/wrench.svg)
`23000000-0000-0000-0000-000000000012` | Стандартная иконка | ![folder](/assets/icons/groups/folder.svg)
`23000000-0000-0000-0000-000000000013` | Стандартная иконка | ![file](/assets/icons/groups/file.svg)
`23000000-0000-0000-0000-000000000014` | Стандартная иконка | ![note](/assets/icons/groups/note.svg)
`23000000-0000-0000-0000-000000000015` | Стандартная иконка | ![history](/assets/icons/groups/history.svg)
`23000000-0000-0000-0000-000000000016` | Стандартная иконка | ![address-book](/assets/icons/groups/address-book.svg)
`23000000-0000-0000-0000-000000000017` | Стандартная иконка | ![certification](/assets/icons/groups/certification.svg)
`23000000-0000-0000-0000-000000000018` | Стандартная иконка | ![vault](/assets/icons/groups/vault.svg)
`23000000-0000-0000-0000-000000000019` | Стандартная иконка | ![percentage](/assets/icons/groups/percentage.svg)
`23000000-0000-0000-0000-00000000001A` | Стандартная иконка | ![wallet](/assets/icons/groups/wallet.svg)
`23000000-0000-0000-0000-00000000001B` | Стандартная иконка | ![bitcoin](/assets/icons/groups/bitcoin.svg)
`23000000-0000-0000-0000-00000000001C` | Стандартная иконка | ![landmark](/assets/icons/groups/landmark.svg)
`23000000-0000-0000-0000-00000000001D` | Стандартная иконка | ![credit-card](/assets/icons/groups/credit-card.svg)
`23000000-0000-0000-0000-00000000001E` | Стандартная иконка | ![coins](/assets/icons/groups/coins.svg)
`23000000-0000-0000-0000-00000000001F` | Стандартная иконка | ![bookmark](/assets/icons/groups/bookmark.svg)
`23000000-0000-0000-0000-000000000020` | Стандартная иконка | ![box](/assets/icons/groups/box.svg)
`23000000-0000-0000-0000-000000000021` | Стандартная иконка | ![wifi](/assets/icons/groups/wifi.svg)

[^1]: PUID - **P**iema **U**nique **Id**entifier *(**рус.** Уникальный идентификатор Piema)* - Немного (много) переделанный UUID
